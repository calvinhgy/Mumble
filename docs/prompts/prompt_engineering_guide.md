# AI提示工程指南

## 1. 提示工程概述

Mumble应用的核心功能依赖于高质量的AI提示工程，以确保生成的图像准确反映用户的语音输入和环境上下文。本指南详细说明了如何构建、测试和优化用于DALL-E 3图像生成的提示词。

## 2. 提示词结构

### 2.1 基本结构

Mumble的提示词遵循以下结构：

```
[风格描述] + [场景描述] + [情感/氛围] + [环境元素] + [技术参数]
```

例如：
```
一幅充满活力的水彩画，展示了一个人站在繁华的上海街头，周围是闪烁的霓虹灯和雨后的湿润街道，营造出一种沉思而又充满希望的氛围，夜晚的城市灯光反射在水洼中，高分辨率，精细细节，平衡构图。
```

### 2.2 组件详解

1. **风格描述**：定义图像的艺术风格
   - 例如：水彩画、油画、素描、像素艺术、摄影风格等
   - 可根据语音情感和内容动态调整

2. **场景描述**：基于用户语音内容的核心场景
   - 应包含主体、动作和环境
   - 保持具体而有想象力

3. **情感/氛围**：反映语音中检测到的情感
   - 例如：平静的、激动的、沉思的、欢快的等
   - 通过色调和光线暗示情绪

4. **环境元素**：融入收集的环境数据
   - 位置：城市名称、地标或地理特征
   - 天气：当前天气状况（雨、雪、晴朗等）
   - 时间：一天中的时段（黎明、黄昏、夜晚等）

5. **技术参数**：确保图像质量的技术指导
   - 分辨率和细节级别
   - 构图指导
   - 光线和阴影建议

## 3. 动态提示词生成

### 3.1 语音内容分析

1. **关键词提取**：
   - 识别语音中的主要名词、动词和形容词
   - 优先考虑具有视觉表现力的词汇
   - 示例：从"我喜欢在雨中漫步"中提取"雨"、"漫步"

2. **主题识别**：
   - 确定语音的核心主题
   - 将抽象概念转化为可视化元素
   - 示例：将"自由"转化为"展翅飞翔的鸟"

3. **情感分析**：
   - 评估语音的情感基调
   - 映射情感到视觉元素和色彩
   - 示例：将"平静"映射到"柔和的蓝色调和平静的水面"

### 3.2 环境数据整合

1. **位置映射**：
   - 城市 → 标志性建筑或特征
   - 自然环境 → 典型景观元素
   - 示例：上海 → 东方明珠塔、外滩、石库门建筑

2. **天气转换**：
   - 雨 → 湿润表面、反射、雨滴
   - 雪 → 白色覆盖、柔和光线
   - 晴天 → 明亮色彩、清晰阴影
   - 雾 → 朦胧效果、柔和边缘

3. **时间表达**：
   - 早晨 → 温暖的金色光线、长阴影
   - 中午 → 明亮直射光、短阴影
   - 黄昏 → 橙红色调、剪影效果
   - 夜晚 → 深蓝色调、人工光源

### 3.3 风格选择逻辑

根据以下因素动态选择艺术风格：

1. **语音内容匹配**：
   - 怀旧话题 → 复古摄影风格
   - 未来话题 → 科幻数字艺术
   - 自然描述 → 印象派或水彩

2. **情感匹配**：
   - 激动/热情 → 表现主义、鲜艳色彩
   - 平静/沉思 → 极简主义、柔和色调
   - 忧郁 → 低饱和度、高对比度

3. **环境匹配**：
   - 雨天 → 水彩或印象派
   - 城市夜景 → 赛博朋克或霓虹风格
   - 自然日光 → 写实主义或摄影风格

## 4. 提示词模板

### 4.1 基础模板

```
一幅[风格]作品，描绘了[主体][动作]在[环境]中的场景，整体氛围[情感描述]，[环境细节：天气/时间]，[技术参数]。
```

### 4.2 场景特定模板

**城市场景**：
```
一幅[风格]的[城市名称]城市景观，展现了[特定地标/街道]，[人物/活动描述]，在[时间]的[天气状况]下，[光线描述]照亮了场景，营造出[情感]的氛围，[技术参数]。
```

**自然场景**：
```
一幅[风格]的自然风景，展示了[自然元素]在[地理位置]的壮丽景色，[天气描述]为场景增添了[情感]氛围，[时间]的光线[光线描述]，[技术参数]。
```

**抽象概念**：
```
一幅[风格]的抽象表现，通过[视觉元素]象征性地表达[抽象概念]，色彩以[色彩描述]为主，营造出[情感]的感觉，受到[环境因素]的启发，[技术参数]。
```

### 4.3 情感特定模板

**喜悦/兴奋**：
```
一幅充满活力的[风格]作品，以明亮的色彩和动态构图捕捉[主体][充满活力的动作]的瞬间，在[环境]中洋溢着欢乐的氛围，[环境细节]增强了场景的喜悦感，[技术参数]。
```

**沉思/平静**：
```
一幅平静的[风格]作品，以柔和的色调和和谐的构图展现[主体]在[环境]中[平静动作]的场景，[环境细节]营造出宁静的氛围，整体透露出沉思的情绪，[技术参数]。
```

**忧郁/悲伤**：
```
一幅情感深沉的[风格]作品，通过低饱和度的色彩和强烈的明暗对比，描绘[主体]在[环境]中[情感动作]的场景，[环境细节]强化了忧郁的氛围，[技术参数]。
```

## 5. 提示词优化策略

### 5.1 具体性原则

- **使用具体而非抽象描述**
  - 弱："美丽的风景"
  - 强："金色阳光照耀下的翠绿山谷，清澈的溪流蜿蜒其中"

- **指定明确的视觉元素**
  - 弱："一个城市场景"
  - 强："一个繁忙的城市十字路口，行人撑着伞穿过雨中的斑马线"

- **提供感官细节**
  - 弱："一个雨天"
  - 强："雨滴敲打在窗户上，形成蜿蜒的水痕，街道上的水洼反射着霓虹灯光"

### 5.2 平衡原则

- **细节与空间**
  - 提供足够细节引导AI，但留出创造空间
  - 避免过度约束每个元素

- **技术与艺术**
  - 平衡技术参数与艺术表达
  - 技术参数应支持而非主导创意表达

- **用户输入与环境数据**
  - 用户语音内容应占据提示词的主导地位
  - 环境数据作为补充和增强元素

### 5.3 避免的陷阱

- **过度指定**：不要尝试控制图像的每个细节
- **矛盾指令**：避免在同一提示中包含相互冲突的元素
- **技术术语堆砌**：避免无意义地堆砌技术词汇
- **风格混淆**：不要在同一提示中混合不兼容的艺术风格

## 6. 测试与迭代

### 6.1 A/B测试框架

为每种提示词结构创建变体，并通过以下维度评估：

1. **视觉质量**：清晰度、构图、色彩和谐性
2. **内容相关性**：与用户语音内容的匹配度
3. **情感一致性**：与检测到的情感的匹配度
4. **环境整合**：环境数据的自然融入程度
5. **用户满意度**：最终用户对生成图像的评价

### 6.2 迭代流程

1. **收集基线**：使用初始提示词模板生成图像
2. **分析结果**：识别强项和弱项
3. **调整模板**：基于分析修改提示词结构
4. **测试变体**：生成新的图像样本
5. **比较结果**：与基线和先前迭代比较
6. **用户验证**：获取真实用户反馈
7. **标准化**：将成功的模式整合到标准模板中

### 6.3 质量保证检查表

每个生成的提示词应通过以下检查：

- [ ] 包含所有必要的结构组件
- [ ] 准确反映用户语音内容
- [ ] 适当整合环境数据
- [ ] 避免技术术语过度使用
- [ ] 风格选择与内容和情感一致
- [ ] 没有矛盾或冲突的指令
- [ ] 语言流畅自然
- [ ] 长度适中（通常150-250个字符）

## 7. 特殊场景处理

### 7.1 低质量输入

当用户语音内容过短、不清晰或缺乏描述性时：

1. **扩展策略**：基于有限信息扩展场景
   - 例如："嗯..."可扩展为"一个人沉思的瞬间，周围环境反映当前位置和天气"

2. **环境优先**：更多依赖环境数据
   - 增加位置、天气和时间在提示词中的权重

3. **通用模板**：使用更通用的艺术表达
   - 例如："一幅抽象艺术作品，通过色彩和形式表达当前环境的氛围"

### 7.2 敏感内容

当检测到潜在敏感或不适当内容时：

1. **内容过滤**：移除或替换敏感词汇
2. **抽象化**：将具体描述转换为抽象表达
3. **重定向**：转向环境数据或情感表达
4. **安全默认值**：使用预设的安全模板

### 7.3 多语言支持

处理非中文语音输入：

1. **保留原始语言特色**：
   - 例如法语输入可能导向印象派风格
   - 日语输入可能导向浮世绘风格

2. **文化敏感性**：
   - 根据语言调整文化参考
   - 避免文化刻板印象

3. **翻译策略**：
   - 先翻译为中文进行处理
   - 保留原语言中的关键术语或表达

## 8. 提示词库

### 8.1 风格描述库

```json
{
  "写实": ["照片级写实的", "超写实的", "逼真的", "细节丰富的写实画面"],
  "印象派": ["印象派风格的", "笔触明显的印象派作品", "莫奈风格的"],
  "水彩": ["水彩画风格", "水彩渲染的", "色彩柔和的水彩效果"],
  "油画": ["厚重油彩的", "经典油画风格的", "质感丰富的油画"],
  "素描": ["铅笔素描风格", "炭笔素描的", "线条精细的素描"],
  "赛博朋克": ["霓虹灯闪烁的赛博朋克场景", "高科技赛博朋克风格", "未来主义赛博朋克美学"],
  "极简主义": ["简约的", "极简设计的", "留白丰富的极简风格"],
  "卡通": ["卡通风格的", "动画效果的", "可爱卡通渲染的"],
  "像素艺术": ["复古像素风格", "8位像素艺术", "像素化的复古游戏风格"],
  "浮世绘": ["日本浮世绘风格", "浮世绘版画效果", "北斋风格的"]
}
```

### 8.2 情感映射库

```json
{
  "喜悦": {
    "色彩": ["明亮的", "鲜艳的", "充满活力的色彩"],
    "光线": ["阳光充足的", "明亮照耀的", "温暖的光线"],
    "构图": ["开放的构图", "动态的布局", "上升的线条"]
  },
  "平静": {
    "色彩": ["柔和的", "淡雅的", "和谐的色调"],
    "光线": ["柔和漫射的光", "温和的光线", "平静的光影"],
    "构图": ["平衡的构图", "水平线条", "开阔的空间"]
  },
  "忧郁": {
    "色彩": ["低饱和度的", "蓝灰色调的", "暗沉的色彩"],
    "光线": ["阴影丰富的", "微弱的光线", "戏剧性的明暗对比"],
    "构图": ["封闭的构图", "下降的线条", "孤立的主体"]
  },
  "激动": {
    "色彩": ["高对比度的", "强烈的色彩", "热烈的色调"],
    "光线": ["戏剧性的光线", "强烈的明暗对比", "闪烁的光效"],
    "构图": ["动态的构图", "对角线构图", "紧张的空间关系"]
  },
  "神秘": {
    "色彩": ["深邃的", "紫色调的", "有限的色彩范围"],
    "光线": ["局部照明", "雾气弥漫的", "神秘的光源"],
    "构图": ["隐藏的元素", "部分可见的主体", "渐变的边缘"]
  }
}
```

### 8.3 环境元素库

```json
{
  "天气": {
    "晴": ["阳光明媚的", "晴朗的蓝天", "明亮的日光下"],
    "雨": ["雨水滴落的", "湿润的表面反射着光线", "雨中的朦胧景象"],
    "雪": ["雪花飘落的", "白雪覆盖的", "雪景中的宁静场景"],
    "雾": ["雾气缭绕的", "朦胧的轮廓", "雾中若隐若现的景象"],
    "阴": ["云层遮蔽的", "柔和漫射光线下", "灰蒙蒙的天空下"]
  },
  "时间": {
    "黎明": ["破晓时分的", "晨曦初现的", "黎明的第一缕光线"],
    "上午": ["清晨阳光的", "明亮晨光中的", "早晨活力四射的场景"],
    "中午": ["正午强光下的", "阳光直射的", "明亮无阴影的中午"],
    "下午": ["午后温暖光线中的", "斜射阳光下的", "金色下午光线中"],
    "黄昏": ["日落余晖中的", "金红色调的黄昏", "暮色中的剪影"],
    "夜晚": ["星光下的", "月光照耀的", "夜色笼罩的", "城市灯光中的"]
  },
  "地点类型": {
    "城市": ["繁华都市的", "城市街道上的", "摩天大楼间的"],
    "郊区": ["宁静郊区的", "住宅区的", "社区公园中的"],
    "乡村": ["田园风光中的", "乡间小路上的", "农田环绕的"],
    "海边": ["海浪拍打的", "沙滩上的", "海岸线旁的"],
    "山区": ["群山环绕的", "山间小径上的", "高山景观中的"],
    "森林": ["树林深处的", "森林覆盖的", "林间空地上的"]
  }
}
```

### 8.4 技术参数库

```json
{
  "分辨率": ["高分辨率", "4K质量", "精细细节"],
  "构图": ["平衡构图", "黄金分割构图", "对称构图", "三分法构图"],
  "渲染": ["精细渲染", "逼真质感", "细腻纹理"],
  "光效": ["体积光", "光线追踪", "自然光影", "戏剧性光影"],
  "视角": ["广角视角", "特写视角", "鸟瞰视角", "人眼视角"]
}
```

## 9. 案例研究

### 9.1 案例一：城市雨夜

**用户语音**：
"今晚的雨真美，街上的灯光在雨中变得模糊而梦幻。"

**环境数据**：
- 位置：上海
- 天气：雨
- 时间：晚上9点

**生成提示词**：
```
一幅印象派风格的夜景，展现雨中的上海街道，霓虹灯光在湿润的路面上形成模糊而梦幻的倒影，行人撑着伞走过闪烁的街景，营造出宁静而又充满诗意的氛围，雨滴在路灯光晕中闪烁，高分辨率，精细细节，平衡构图。
```

**结果分析**：
- 成功捕捉了用户描述的"模糊而梦幻"的雨中灯光
- 印象派风格与雨天场景自然匹配
- 上海的城市元素与雨夜氛围融合良好

### 9.2 案例二：海边日出

**用户语音**：
"我感到如此平静，就像看着海上的日出，一切烦恼都被冲走了。"

**环境数据**：
- 位置：三亚
- 天气：晴
- 时间：早上6点

**生成提示词**：
```
一幅写实风格的三亚海滩日出场景，金红色的阳光从海平面缓缓升起，温暖的光芒洒在平静的海面上形成金色光路，前景是细腻的沙滩，远处可见几只海鸟掠过，整体氛围宁静而治愈，传达出内心平静的感受，精细渲染，自然光影，广角构图。
```

**结果分析**：
- 将抽象的"平静"情感转化为具体的视觉场景
- 利用环境数据（三亚、晴天、早晨）创建了合适的背景
- 写实风格增强了场景的沉浸感和情感共鸣

### 9.3 案例三：抽象情绪

**用户语音**：
"嗯...我今天感觉很复杂，有点迷茫，但又有一丝希望。"

**环境数据**：
- 位置：北京
- 天气：多云
- 时间：傍晚

**生成提示词**：
```
一幅抽象表现主义风格的作品，以蓝灰色调为主，模糊的北京城市轮廓若隐若现于背景，画面中交织着迷茫的漩涡状线条，但右上角有一束温暖的金色光线穿透云层，象征希望的存在，傍晚的微光为场景增添了过渡感，高对比度，情感化笔触，不规则构图。
```

**结果分析**：
- 将抽象情绪转化为视觉符号（漩涡状线条表示迷茫，金色光线表示希望）
- 利用色彩心理学（蓝灰色调）强化情感表达
- 环境元素（北京、多云、傍晚）作为情绪的背景支持
